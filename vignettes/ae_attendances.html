<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Tom Jemmett, The Strategy Unit" />


<title>ae_attendances dataset</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">ae_attendances dataset</h1>
<h4 class="author"><a href="mailto:thomas.jemmett@nhs.net">Tom Jemmett</a>, <a href="https://www.strategyunitwm.nhs.uk/">The Strategy Unit</a></h4>
<h4 class="date">15/08/2019</h4>



<p>This vignette explains how to use the <code>ae_attendances</code> dataset in R, and also details where it comes from and how it is generated.</p>
<p>The data is sourced from <a href="https://www.england.nhs.uk/statistics/statistical-work-areas/ae-waiting-times-and-activity/">NHS England Statistical Work Areas</a> and is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence v3.0</a>.</p>
<p>The data contains all reported A&amp;E attendances for the period April 2016 through March 2019</p>
<p>The dataset contains:</p>
<ul>
<li><strong>period</strong>: the month that this activity relates to, stored as a date (1st of each month)</li>
<li><strong>org_code</strong>: the <a href="https://digital.nhs.uk/services/organisation-data-service">ODS</a> code for the organisation that this activity relates to</li>
<li><strong>type</strong>: the <a href="https://digital.nhs.uk/services/organisation-data-service">Department Type</a> for this activity, either 1, 2, or other</li>
<li><strong>attendances</strong>: the number of attendances for this department type at this organisation for this month</li>
<li><strong>breaches</strong>: the number of attendances that breached the 4 hour target</li>
<li><strong>admissions</strong>: the number of attendances that resulted in an admission to the hospital</li>
</ul>
<p>First let’s load some packages and the dataset and show the first 10 rows of data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(ggrepel)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; Attaching package: &#39;lubridate&#39;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; The following objects are masked from &#39;package:dplyr&#39;:</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt;     intersect, setdiff, union</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt;     date, intersect, setdiff, union</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">library</span>(forcats)</a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">#&gt; Attaching package: &#39;tidyr&#39;</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">#&gt; The following objects are masked from &#39;package:Matrix&#39;:</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">#&gt;     expand, pack, unpack</span></a>
<a class="sourceLine" id="cb1-21" title="21"></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="kw">library</span>(NHSRdatasets)</a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">data</span>(<span class="st">&quot;ae_attendances&quot;</span>)</a>
<a class="sourceLine" id="cb1-25" title="25"></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb1-27" title="27">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="st">  </span><span class="co"># set the period column to show in Month-Year format</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="st">  </span><span class="co"># set the numeric columns to have a comma at the 1000&#39;s place</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches, admissions), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="st">  </span><span class="co"># show the first 10 rows</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="st">  </span><span class="co"># format as a table</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">period</th>
<th align="left">org_code</th>
<th align="left">type</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">admissions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">1</td>
<td align="left">21,289</td>
<td align="left">2,879</td>
<td align="left">5,060</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">2</td>
<td align="left">813</td>
<td align="left">22</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">other</td>
<td align="left">2,850</td>
<td align="left">6</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">1</td>
<td align="left">30,210</td>
<td align="left">5,902</td>
<td align="left">6,943</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">2</td>
<td align="left">807</td>
<td align="left">11</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">other</td>
<td align="left">11,352</td>
<td align="left">136</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">AD913</td>
<td align="left">other</td>
<td align="left">4,381</td>
<td align="left">2</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RYX</td>
<td align="left">other</td>
<td align="left">19,562</td>
<td align="left">258</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RQM</td>
<td align="left">1</td>
<td align="left">17,414</td>
<td align="left">2,030</td>
<td align="left">3,597</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RQM</td>
<td align="left">other</td>
<td align="left">7,817</td>
<td align="left">86</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
<p>We can calculate the 4 hours performance for England as a whole like so:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">england_performance &lt;-<span class="st"> </span>ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(period) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances)</a>
<a class="sourceLine" id="cb2-5" title="5"></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb2-7" title="7">england_performance <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="st">  </span><span class="co"># same format options as above</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="st">  </span><span class="co"># this time show the performance column as a percentage</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(performance), percent) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="st">  </span><span class="co"># show the first 10 rows and format as a table</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">period</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">performance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Apr-16</td>
<td align="left">1,867,781</td>
<td align="left">186,122</td>
<td align="left">90.0351%</td>
</tr>
<tr class="even">
<td align="left">May-16</td>
<td align="left">2,070,340</td>
<td align="left">201,329</td>
<td align="left">90.2756%</td>
</tr>
<tr class="odd">
<td align="left">Jun-16</td>
<td align="left">1,958,802</td>
<td align="left">184,912</td>
<td align="left">90.5599%</td>
</tr>
<tr class="even">
<td align="left">Jul-16</td>
<td align="left">2,079,034</td>
<td align="left">201,973</td>
<td align="left">90.2852%</td>
</tr>
<tr class="odd">
<td align="left">Aug-16</td>
<td align="left">1,932,901</td>
<td align="left">174,419</td>
<td align="left">90.9763%</td>
</tr>
<tr class="even">
<td align="left">Sep-16</td>
<td align="left">1,952,464</td>
<td align="left">182,597</td>
<td align="left">90.6479%</td>
</tr>
<tr class="odd">
<td align="left">Oct-16</td>
<td align="left">2,001,816</td>
<td align="left">219,137</td>
<td align="left">89.0531%</td>
</tr>
<tr class="even">
<td align="left">Nov-16</td>
<td align="left">1,907,871</td>
<td align="left">221,713</td>
<td align="left">88.3790%</td>
</tr>
<tr class="odd">
<td align="left">Dec-16</td>
<td align="left">1,944,567</td>
<td align="left">268,818</td>
<td align="left">86.1759%</td>
</tr>
<tr class="even">
<td align="left">Jan-17</td>
<td align="left">1,895,272</td>
<td align="left">281,612</td>
<td align="left">85.1413%</td>
</tr>
</tbody>
</table>
<p>We can now plot the monthly performance</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">ggplot</span>(england_performance, <span class="kw">aes</span>(period, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb3-8" title="8">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can clearly see the “Winter Pressures” where performance drops.</p>
<p>We can also inspect performance for the <a href="https://www.datadictionary.nhs.uk/data_dictionary/attributes/a/acc/accident_and_emergency_department_type_de.asp">different types of department</a>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(period, type) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(period, performance, <span class="dt">colour =</span> type)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="co">#facet_wrap(vars(type), nrow = 1) +</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb4-12" title="12">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb4-13" title="13">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb4-14" title="14">       <span class="dt">subtitle =</span> <span class="st">&quot;By Department Type&quot;</span>,</a>
<a class="sourceLine" id="cb4-15" title="15">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>From this it appears as if only the type 1 departments have the seasonal drops, type 2 and “other” departments remain pretty consistent.</p>
<div id="what-are-the-best-and-worst-trusts-for-performance" class="section level2">
<h2>What are the best and worst trusts for performance?</h2>
<p>We could create a similar table of data for performance by each individual trust, but it would be useful to only look at trusts that have a type 1 department as it appears from the chart above that these departments have the largest variation.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">performance_by_trust &lt;-<span class="st"> </span>ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(org_code, period) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="co"># make sure that this trust has a type 1 department</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">any</span>(type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances)</a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb5-9" title="9">performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(performance), percent) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">org_code</th>
<th align="left">period</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">performance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Oct-17</td>
<td align="left">35,744.0</td>
<td align="left">3,663.0</td>
<td align="left">89.7521%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Nov-17</td>
<td align="left">34,314.0</td>
<td align="left">3,982.0</td>
<td align="left">88.3954%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Dec-17</td>
<td align="left">34,082.0</td>
<td align="left">5,430.0</td>
<td align="left">84.0678%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Jan-18</td>
<td align="left">33,758.0</td>
<td align="left">4,906.0</td>
<td align="left">85.4671%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Feb-18</td>
<td align="left">30,520.0</td>
<td align="left">4,111.0</td>
<td align="left">86.5301%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Mar-18</td>
<td align="left">35,233.0</td>
<td align="left">5,496.0</td>
<td align="left">84.4010%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Apr-18</td>
<td align="left">33,127.0</td>
<td align="left">3,809.0</td>
<td align="left">88.5018%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">May-18</td>
<td align="left">35,797.0</td>
<td align="left">4,792.0</td>
<td align="left">86.6134%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Jun-18</td>
<td align="left">34,070.0</td>
<td align="left">3,616.0</td>
<td align="left">89.3866%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Jul-18</td>
<td align="left">35,081.0</td>
<td align="left">4,723.0</td>
<td align="left">86.5369%</td>
</tr>
</tbody>
</table>
<p>From this table we can calculate the overall performance by each trust and then organise the trusts by their overall performance.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">performance_by_trust_ranking &lt;-<span class="st"> </span>performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">sum</span>(breaches) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(attendances)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(performance) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">pull</span>(org_code) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="kw">as.character</span>()</a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="kw">print</span>(<span class="st">&quot;Bottom 5&quot;</span>)</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; [1] &quot;Bottom 5&quot;</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw">head</span>(performance_by_trust_ranking, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt; [1] &quot;RQW&quot; &quot;RWD&quot; &quot;RXW&quot; &quot;RX1&quot; &quot;RHU&quot;</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">print</span>(<span class="st">&quot;Top 5&quot;</span>)</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; [1] &quot;Top 5&quot;</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="kw">tail</span>(performance_by_trust_ranking, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; [1] &quot;RA4&quot; &quot;RBD&quot; &quot;RVW&quot; &quot;RCU&quot; &quot;RC9&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(org_code), fct_relevel, performance_by_trust_ranking) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">filter</span>(org_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">head</span>(performance_by_trust_ranking, <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb7-5" title="5">                         <span class="kw">tail</span>(performance_by_trust_ranking, <span class="dv">5</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(period, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(org_code), <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb7-13" title="13">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb7-14" title="14">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb7-15" title="15">       <span class="dt">subtitle =</span> <span class="st">&quot;Bottom 5/Top 5 over the whole 3 years&quot;</span>,</a>
<a class="sourceLine" id="cb7-16" title="16">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="benchmarking" class="section level2">
<h2>Benchmarking</h2>
<p>It is sometimes useful to see how an organisation stacks up against all of the other organisations. Below we create a chart where each organisation is shown as a point, ordered by performance from left (highest performance) to right (lowest) performance.</p>
<p>It’s useful to indicate certain organisations on the chart, below I am showing the 3 organisations that are at the lower quartile, median and upper quartile, however you could change this to instead pick out specific organisations (using a reference table and <code>left_join</code> or hard coding with <code>case_when</code>).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">filter</span>(period <span class="op">==</span><span class="st"> </span><span class="kw">last</span>(period)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(org_code) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">any</span>(type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches<span class="op">/</span>attendances,</a>
<a class="sourceLine" id="cb8-7" title="7">         <span class="dt">overall_performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">sum</span>(breaches)<span class="op">/</span><span class="kw">sum</span>(attendances),</a>
<a class="sourceLine" id="cb8-8" title="8">         <span class="dt">org_code =</span> <span class="kw">fct_reorder</span>(org_code, <span class="op">-</span>performance)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="st">  </span><span class="co">#</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="st">  </span><span class="kw">arrange</span>(performance) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="st">  </span><span class="co"># lets highlight the organsiations that are at the lower and upper quartile</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="st">  </span><span class="co"># and at the median. First &quot;tile&quot; the data into 4 groups, then we use the</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="st">  </span><span class="co"># lag function to check to see if the value changes between rows. We will get</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="st">  </span><span class="co"># NA for the first row, so replace this with FALSE</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">highlight =</span> <span class="kw">ntile</span>(<span class="dt">n =</span> <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb8-16" title="16">         <span class="dt">highlight =</span> <span class="kw">replace_na</span>(highlight <span class="op">!=</span><span class="st"> </span><span class="kw">lag</span>(highlight), <span class="ot">FALSE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-17" title="17"></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(org_code, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept =</span> overall_performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> highlight), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>, <span class="dt">pch =</span> <span class="dv">21</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="st">  </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">ifelse</span>(highlight, <span class="kw">as.character</span>(org_code), <span class="ot">NA</span>)),</a>
<a class="sourceLine" id="cb8-22" title="22">                  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;TRUE&quot;</span> =<span class="st"> &quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb8-24" title="24">                               <span class="st">&quot;FALSE&quot;</span> =<span class="st"> </span><span class="ot">NA</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-25" title="25"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-28" title="28">        <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-29" title="29">        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(),</a>
<a class="sourceLine" id="cb8-30" title="30">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>())</a></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAwFBMVEUAAAAAADoAAGYAOpAAZpAAZrY6AAA6ADo6AGY6Ojo6OpA6kNtNTU1NTW5NTY5NbqtNjshmAABmADpmZmZmkJBmtv9uTU1uTW5uTY5ubqtuq8huq+SOTU2OTW6OTY6OyP+QOgCQOjqQkDqQkGaQtpCQ27aQ2/+rbk2rbm6ryKur5P+2ZgC2///Ijk3I/8jI///bkDrb/7bb/9vb///kq27k/8jk////tmb/yI7/25D/5Kv//7b//8j//9v//+T///9cKkLiAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKhElEQVR4nO2di3/TNhDH1bGWsRZYumWvMshe2Ubo8EZHGkLQ//9fzSfLtmQ7OT/0OKv3+3yondiR5S+n09NnIVknJWJngLoYECIGhIgBIWJAiE4C+vD9Wyk/vrh6/r7ayGrvFv5++uNViFxG1ClA91fP3ioEd1+Vm1x678MP729v5P1X/ZKar07c1e3Tv3IL+vjyLViS3uRf670czd3Npz9f90pqxkKLWG4p8uNPr/UGvqy+uL25Kw1IgPznNoJQQPfPFQ+9yb8s93If9N/Lv19c3fRKarYabUFw/O7m7kbvYknNViigYz6o2Lt9VbuhBwro0x83RS12U9Vi5d5dvsMWZLeDlE3pFpEqaw/bB0VLipBcAkqyondrQQkScmtBCRqRUwsCPqkRcuyDGNDJpBjQ6aSSdELua7HECDEgRM4BpVbKHHc1FJ2kCLnuixWAEiLkAVBazUXnvfnCBzGgE0mlVZX5GA9iH+Q9KUJiQIgYECIGhIgBIWJAiLwASqme99IOSgmRH0AiHUKeAIlkEHnzQamMT3uqxQo8KSDyVc0nY0T+2kGJGJHHhqJIYnTRa0s6hXLmt6uRACHffbHSE7m7TGB5ByQZ0OmktAm5u0xghRjumPWqjyDjQXOejw4IaJ6EQgGarSMKM+Q648VnocakZ+uGgg3az7WMhQPk9mLBFG7aZ6ZeKOC82DwHh0ICKltDh1VRqV1KuXn0Lj+SiXMJX3+++uxNvrO7OHeXq6kKC6gAc1hdwufdxVJugchh9TVw2i8udxdwpKBGRCGnnsuHOUQBSG7OFSS5v/79ei3l9mwtsxyY+o6Mgs7Nl6PUNSBlTNtH/8Imyw1nvziHrwkp8OIFvY5aAdqKZUFlcymzHMoGvt2e/fZ47S5P0xV8dQf4IN3zgJKUO6HDail3X7zZL+Bz7sAv3WXJgcID0iWt8Me5/1nncPKitYSNlIXbJqTw64OUD8r/qBIGBQuKV7lhQHCeWClnvVEosnPle/SGAckSkBBFe3D3RDllvWFA6kRdl6nabL9QzcLDSrcOGVBx7mym7WMBms10WaxVrmIuA/nxlgHPZJw64jppBoT+gAFhv6DPJ/KjCDMgFNeCZoAoMiD64VDiAyJuQgR8EG1CcQHNoDGE5+3DtxA1uUc86XGAqJcyNGsfX7ySd8/fe4snTb2UoTnTsW39xZMm3mvtC8hjPOlyPpGm+hWxp17jSQvKHfteTvrHP/3Gk65m7QkysrOUCbHM2ksHcrfjN550ZUP0CFk52jz6Z7E8rKy5cbAQ7/GkBd1iZuZov1jC/G9jXuH+KkA86cqCyCHCAY1KaszPaRKyspNBEdsvRq4emHxnJB8ntzOz1bN5DpIalQLB6ix2Z7WZBrnqjBgg04hoMLJyAQviGrX82KTGqzYiEojsdlCxGnckIVe3Iww5SnJKboz9YhFcrGreSqkyImdpjs9LLTKAqnFGAjZkt4MATbx2UDM9Eg/dk2oHNROk0CyiVs3bKQrLY0fhRBpQE08MQtYldxcqI/GddJ1mA1B4QuYVx7cRW0k5VIORn4ucuLyxr6t5F0m5VUw3ZFsQUUDlBWLMoFnXm7ZG2X/WY5Qxu4gJak66dYXghYx2Nd+6RHg35LwDlYo6AdFrB7Wu0b4D31c09g+ry7wiG13ZB8lyhScUomY7aHMptyOfyg4DKLQRNQFl5xTGg05dRYQdTmsOueZ0OibnhyflUZX5BLGh1qD9RpyNfCw7cPUbaFUR3XaQEeEDlJs2RB2QVXs/kCOiDKiK8AFSgMpH7YvrBYmMRrcddKgDWIAUoG++fGf0GEWIQWu640FdgJbw7HgNKESVT3c8SAPS8Qc0IAjPUDdDDDzeGNEdDyqdtM5TAUhml1Y7zTAiT7U+3fEgZUE6woesAO2v11Yuj3Qx3Ym6k942LChv6jf/Gw0D8sCo0Vl1lZQD6dxAhA9o2+c9RAXo8POvXf+BBiO32SDvpCHCBwTvyiuzIn/bYxbuxxNRdtKFPWcC+j9Cxe8qAuoccwF1P9ZX81fHOHKRVBzVBc1dksY++UH7HvIKiE5SE2SUMzeLJo19Wj5orMzmtYvkjH1atdh4OTUhe4XZpBih5AA5aTem5qSVrE7s1LSc5Mh1Ui7k6MmPdAFVfKbly/51BmZJZhHnZLno5BNeBuxC0wdlaS4kd6fJRpQ8ILNKG5eAofSK2PT1jUk7aa1J440JV/OGjHbj0FxW5+tHnqfkYsqPPWt8QXsggKRV0Ab9rNrLKsSzrcXq9Q7lJHHWXO4wuG2d1HCHsd5BVcjlCJc1FzvQhJIaMDOm83dFnPPWiwTE0JVXKVqQWu+gI+Wrz8252CErr5IaMDPXO8BS1LJI2IDkaECzHzAz1zvsr9fVNJbdeRpW3SfVULTWO+gX4oA6ZvN7d/LTA1Sud4BXKtULH6zz6kFrPM1WX6wrRFc/UQGk56b3179BCdMLH6zzhkx72OukO0J09RcZQPoNd5snsNELH2wN6Jo1qvmIEagcyFzvUBW1YuFDS30JJQVomPqtJ2q0g6KG6Aot0echWPswrdAU/tXDVSdVzQ8XbkT4XfmNJx1buu96PO8dY9J2j1VF4vQYTzqy0KWf6KyGirfZEcvVWTzpyBJIKUPnxbQFeYwnHVsTAWmX4zOedGz190HQLG8Vse9ey/tnb73Gk6asrvEga0hIG4zfeNKEhd6VtiC/8aQJC7+r+6urp699x5Omqwfeki513E0zINCJcQ8GBDrRFGJAoBOziQxI6fhsIgMqVPTIug44vIa7pCJISAZ0Wkd6ZAyo1BETYkClGBAiBoSJfdAoMSBEDAgRA0LEgAx1uWkGVKuzomdAtRgQIgaEiX3QCDEgUx0mxIAMdTkhBmSIASFiQJjYBw0XA0LEgGy1ChkDstR20wzIEgNC1F4Hw4BstZ5DZEC2WmWMAdliQJjYBw0UA0LEgBAxIEQMCBEDasmuxxhQU43eBgNqqrHqngE1xYAw2f1VBtQW+6AhYkCIGBAiBoSIASFiQF0y6jEG1CFz3JUBdYgBIWJAmNgH9RcDQsSAEDEgRAwIEQNCxIAQMSBEDAgRA0LEgBAxoE7VnTH0ru6uQK9SDZfcraHTPvfphkvu1kBAEGwz2XDJnRoICCwn4XDJXRrggwoDSjpc8kn1uCsg0rYgOPLQwiUf0S3YCIdLPqqCAIdLPipNgMMlU0qKkBgQIgaEiAEhcgkoKXkAlKYYECIGhIgBIWJAiBgQIgaEiAEhSgLQ2Ffn9hEDQsSAEFEEdFgJcS7l7otfxGdv9gtxpt6Lbh+stnD81xwQfPbBiSAgeJ87/FNvRYc3Lu4X9Z3DAXhZZXlSeVy9BD7rei34RBEEpApM/md3sdQfshrQ7vHaOqk8vi1eEbs8mupYUQQEdpCDUCyUUezqIla6m/Kk8nhWDFKMfZH3cSUDyEPpUqIICN72CkXs8bouSuXBqojpk6qidrb2kxuCgCon/Xjd7aTNf/vFuXbSuQn5oEQQUFXNK2Mpq/HGwc5q3ocVUQTU0taXg+kh6oCg1Kg2TixRBySh/oZGY1GN+3LFx0UeUGwxIEQMCBEDQsSAEDEgRAwI0f9s9e5oyMxj1AAAAABJRU5ErkJggg==" /><!-- --></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
