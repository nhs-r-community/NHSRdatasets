<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Tom Jemmett, The Strategy Unit" />


<title>ae_attendances dataset</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">ae_attendances dataset</h1>
<h4 class="author"><a href="mailto:thomas.jemmett@nhs.net">Tom Jemmett</a>, <a href="https://www.strategyunitwm.nhs.uk/">The Strategy Unit</a></h4>
<h4 class="date">15/08/2019</h4>



<p>This vigenette explains how to use the <code>ae_attendances</code> dataset in R, and also details where it comes from and how it is generated.</p>
<p>The data is sourced from <a href="https://www.england.nhs.uk/statistics/statistical-work-areas/ae-waiting-times-and-activity/">NHS England Statistical Work Areas</a> and is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence v3.0</a>.</p>
<p>The data contains all reported A&amp;E attendances for the period April 2016 through March 2019</p>
<p>The dataset contains:</p>
<ul>
<li><strong>period</strong>: the month that this activity relates to, stored as a date (1st of each month)</li>
<li><strong>org_code</strong>: the <a href="https://digital.nhs.uk/services/organisation-data-service">ODS</a> code for the organisation that this activity relates to</li>
<li><strong>type</strong>: the <a href="https://digital.nhs.uk/services/organisation-data-service">Department Type</a> for this activity, either 1, 2, or other</li>
<li><strong>attendances</strong>: the number of attendances for this department type at this organisation for this month</li>
<li><strong>breaches</strong>: the number of attendances that breached the 4 hour target</li>
<li><strong>admissions</strong>: the number of attendances that resulted in an admission to the hospital</li>
</ul>
<p>First let’s load some packages and the dataset and show the first 10 rows of data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(ggrepel)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; Loading required package: ggplot2</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; Attaching package: &#39;lubridate&#39;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; The following object is masked from &#39;package:base&#39;:</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;     date</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt; The following objects are masked from &#39;package:lubridate&#39;:</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">#&gt;     intersect, setdiff, union</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="kw">library</span>(forcats)</a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb1-25" title="25"></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="kw">library</span>(NHSRdatasets)</a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="kw">data</span>(<span class="st">&quot;ae_attendances&quot;</span>)</a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb1-31" title="31">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="st">  </span><span class="co"># set the period column to show in Month-Year format</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="st">  </span><span class="co"># set the numeric columns to have a comma at the 1000&#39;s place</span></a>
<a class="sourceLine" id="cb1-35" title="35"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches, admissions), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="st">  </span><span class="co"># show the first 10 rows</span></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="st">  </span><span class="co"># format as a table</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">period</th>
<th align="left">org_code</th>
<th align="left">type</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">admissions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">1</td>
<td align="left">21,289</td>
<td align="left">2,879</td>
<td align="left">5,060</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">2</td>
<td align="left">813</td>
<td align="left">22</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RF4</td>
<td align="left">other</td>
<td align="left">2,850</td>
<td align="left">6</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">1</td>
<td align="left">30,210</td>
<td align="left">5,902</td>
<td align="left">6,943</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">2</td>
<td align="left">807</td>
<td align="left">11</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">R1H</td>
<td align="left">other</td>
<td align="left">11,352</td>
<td align="left">136</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">AD913</td>
<td align="left">other</td>
<td align="left">4,381</td>
<td align="left">2</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RYX</td>
<td align="left">other</td>
<td align="left">19,562</td>
<td align="left">258</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">Mar-17</td>
<td align="left">RQM</td>
<td align="left">1</td>
<td align="left">17,414</td>
<td align="left">2,030</td>
<td align="left">3,597</td>
</tr>
<tr class="even">
<td align="left">Mar-17</td>
<td align="left">RQM</td>
<td align="left">other</td>
<td align="left">7,817</td>
<td align="left">86</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
<p>We can calculate the 4 hours performance for England as a whole like so:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">england_performance &lt;-<span class="st"> </span>ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(period) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances)</a>
<a class="sourceLine" id="cb2-5" title="5"></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb2-7" title="7">england_performance <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="st">  </span><span class="co"># same format options as above</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="st">  </span><span class="co"># this time show the performance column as a percentage</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(performance), percent) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="st">  </span><span class="co"># show the first 10 rows and format as a table</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">period</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">performance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Apr-16</td>
<td align="left">1,867,781</td>
<td align="left">186,122</td>
<td align="left">90.04%</td>
</tr>
<tr class="even">
<td align="left">May-16</td>
<td align="left">2,070,340</td>
<td align="left">201,329</td>
<td align="left">90.28%</td>
</tr>
<tr class="odd">
<td align="left">Jun-16</td>
<td align="left">1,958,802</td>
<td align="left">184,912</td>
<td align="left">90.56%</td>
</tr>
<tr class="even">
<td align="left">Jul-16</td>
<td align="left">2,079,034</td>
<td align="left">201,973</td>
<td align="left">90.29%</td>
</tr>
<tr class="odd">
<td align="left">Aug-16</td>
<td align="left">1,932,901</td>
<td align="left">174,419</td>
<td align="left">90.98%</td>
</tr>
<tr class="even">
<td align="left">Sep-16</td>
<td align="left">1,952,464</td>
<td align="left">182,597</td>
<td align="left">90.65%</td>
</tr>
<tr class="odd">
<td align="left">Oct-16</td>
<td align="left">2,001,816</td>
<td align="left">219,137</td>
<td align="left">89.05%</td>
</tr>
<tr class="even">
<td align="left">Nov-16</td>
<td align="left">1,907,871</td>
<td align="left">221,713</td>
<td align="left">88.38%</td>
</tr>
<tr class="odd">
<td align="left">Dec-16</td>
<td align="left">1,944,567</td>
<td align="left">268,818</td>
<td align="left">86.18%</td>
</tr>
<tr class="even">
<td align="left">Jan-17</td>
<td align="left">1,895,272</td>
<td align="left">281,612</td>
<td align="left">85.14%</td>
</tr>
</tbody>
</table>
<p>We can now plot the monthly performance</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">ggplot</span>(england_performance, <span class="kw">aes</span>(period, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb3-8" title="8">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can clearly see the “Winter Pressures” where performance drops.</p>
<p>We can also inspect performance for the <a href="https://www.datadictionary.nhs.uk/data_dictionary/attributes/a/acc/accident_and_emergency_department_type_de.asp">different types of department</a>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(period, type) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">summarise_if</span>(is.numeric, sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(period, performance, <span class="dt">colour =</span> type)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="co">#facet_wrap(vars(type), nrow = 1) +</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb4-12" title="12">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb4-13" title="13">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb4-14" title="14">       <span class="dt">subtitle =</span> <span class="st">&quot;By Department Type&quot;</span>,</a>
<a class="sourceLine" id="cb4-15" title="15">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>From this it appears as if only the type 1 departments have the seasonal drops, type 2 and “other” departments remain pretty consistent.</p>
<div id="what-are-the-best-and-worst-trusts-for-performance" class="section level2">
<h2>What are the best and worst trusts for performance?</h2>
<p>We could create a similar table of data for performance by each individual trust, but it would be useful to only look at trusts that have a type 1 department as it appears from the chart above that these departments have the largest variation.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">performance_by_trust &lt;-<span class="st"> </span>ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(org_code, period) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="co"># make sure that this trust has a type 1 department</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">any</span>(type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches <span class="op">/</span><span class="st"> </span>attendances)</a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co"># format for display</span></a>
<a class="sourceLine" id="cb5-9" title="9">performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(period), format, <span class="st">&quot;%b-%y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(attendances, breaches), comma) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(performance), percent) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">org_code</th>
<th align="left">period</th>
<th align="left">attendances</th>
<th align="left">breaches</th>
<th align="left">performance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Oct-17</td>
<td align="left">35,744</td>
<td align="left">3,663</td>
<td align="left">89.75%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Nov-17</td>
<td align="left">34,314</td>
<td align="left">3,982</td>
<td align="left">88.40%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Dec-17</td>
<td align="left">34,082</td>
<td align="left">5,430</td>
<td align="left">84.07%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Jan-18</td>
<td align="left">33,758</td>
<td align="left">4,906</td>
<td align="left">85.47%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Feb-18</td>
<td align="left">30,520</td>
<td align="left">4,111</td>
<td align="left">86.53%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Mar-18</td>
<td align="left">35,233</td>
<td align="left">5,496</td>
<td align="left">84.40%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Apr-18</td>
<td align="left">33,127</td>
<td align="left">3,809</td>
<td align="left">88.50%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">May-18</td>
<td align="left">35,797</td>
<td align="left">4,792</td>
<td align="left">86.61%</td>
</tr>
<tr class="odd">
<td align="left">R0A</td>
<td align="left">Jun-18</td>
<td align="left">34,070</td>
<td align="left">3,616</td>
<td align="left">89.39%</td>
</tr>
<tr class="even">
<td align="left">R0A</td>
<td align="left">Jul-18</td>
<td align="left">35,081</td>
<td align="left">4,723</td>
<td align="left">86.54%</td>
</tr>
</tbody>
</table>
<p>From this table we can calculate the overall performance by each trust and then organise the trusts by their overall performance.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">performance_by_trust_ranking &lt;-<span class="st"> </span>performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">sum</span>(breaches) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(attendances)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(performance) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">pull</span>(org_code) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="kw">as.character</span>()</a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="kw">print</span>(<span class="st">&quot;Bottom 5&quot;</span>)</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; [1] &quot;Bottom 5&quot;</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw">head</span>(performance_by_trust_ranking, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt; [1] &quot;RQW&quot; &quot;RWD&quot; &quot;RXW&quot; &quot;RX1&quot; &quot;RHU&quot;</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">print</span>(<span class="st">&quot;Top 5&quot;</span>)</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; [1] &quot;Top 5&quot;</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="kw">tail</span>(performance_by_trust_ranking, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; [1] &quot;RA4&quot; &quot;RBD&quot; &quot;RVW&quot; &quot;RCU&quot; &quot;RC9&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">performance_by_trust <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(org_code), fct_relevel, performance_by_trust_ranking) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">filter</span>(org_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">head</span>(performance_by_trust_ranking, <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb7-5" title="5">                         <span class="kw">tail</span>(performance_by_trust_ranking, <span class="dv">5</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(period, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="kw">vars</span>(org_code), <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Month of attendance&quot;</span>,</a>
<a class="sourceLine" id="cb7-13" title="13">       <span class="dt">y =</span> <span class="st">&quot;% of attendances that met the 4 hour standard&quot;</span>,</a>
<a class="sourceLine" id="cb7-14" title="14">       <span class="dt">title =</span> <span class="st">&quot;NHS England A&amp;E 4 Hour Performance&quot;</span>,</a>
<a class="sourceLine" id="cb7-15" title="15">       <span class="dt">subtitle =</span> <span class="st">&quot;Bottom 5/Top 5 over the whole 3 years&quot;</span>,</a>
<a class="sourceLine" id="cb7-16" title="16">       <span class="dt">caption =</span> <span class="st">&quot;Source: NHS England Statistical Work Areas (OGL v3.0)&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="benchmarking" class="section level2">
<h2>Benchmarking</h2>
<p>It is sometimes useful to see how an organisation stacks up against all of the other organisations. Below we create a chart where each organisation is shown as a point, ordered by performance from left (highest performance) to right (lowest) performance.</p>
<p>It’s useful to indicate certain organisations on the chart, below I am showing the 3 organisations that are at the lower quartile, median and upper quartile, however you could change this to instead pick out specific organisations (using a reference table and <code>left_join</code> or hard coding with <code>case_when</code>).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">ae_attendances <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">filter</span>(period <span class="op">==</span><span class="st"> </span><span class="kw">last</span>(period)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(org_code) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">any</span>(type <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(attendances, breaches), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>breaches<span class="op">/</span>attendances,</a>
<a class="sourceLine" id="cb8-7" title="7">         <span class="dt">overall_performance =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">sum</span>(breaches)<span class="op">/</span><span class="kw">sum</span>(attendances),</a>
<a class="sourceLine" id="cb8-8" title="8">         <span class="dt">org_code =</span> <span class="kw">fct_reorder</span>(org_code, <span class="op">-</span>performance)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="st">  </span><span class="co">#</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="st">  </span><span class="kw">arrange</span>(performance) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="st">  </span><span class="co"># lets highlight the organsiations that are at the lower and upper quartile</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="st">  </span><span class="co"># and at the median. First &quot;tile&quot; the data into 4 groups, then we use the</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="st">  </span><span class="co"># lag function to check to see if the value changes between rows. We will get</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="st">  </span><span class="co"># NA for the first row, so replace this with FALSE</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">highlight =</span> <span class="kw">ntile</span>(<span class="dt">n =</span> <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb8-16" title="16">         <span class="dt">highlight =</span> <span class="kw">replace_na</span>(highlight <span class="op">!=</span><span class="st"> </span><span class="kw">lag</span>(highlight), <span class="ot">FALSE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-17" title="17"></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(org_code, performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="kw">aes</span>(<span class="dt">yintercept =</span> overall_performance)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> highlight), <span class="dt">show.legend =</span> <span class="ot">FALSE</span>, <span class="dt">pch =</span> <span class="dv">21</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="st">  </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">ifelse</span>(highlight, <span class="kw">as.character</span>(org_code), <span class="ot">NA</span>)),</a>
<a class="sourceLine" id="cb8-22" title="22">                  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;TRUE&quot;</span> =<span class="st"> &quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb8-24" title="24">                               <span class="st">&quot;FALSE&quot;</span> =<span class="st"> </span><span class="ot">NA</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-25" title="25"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-28" title="28">        <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb8-29" title="29">        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(),</a>
<a class="sourceLine" id="cb8-30" title="30">        <span class="dt">axis.ticks.y =</span> <span class="kw">element_line</span>())</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
